<div [hidden]="hideTemplate">
  <mat-form-field floatLabel="never" class="lf-field lf-template-picker lf-dropdown">
    <mat-label *ngIf="isDropdownLoading; else showDefaultEmptyTemplate" class="lf-dropdown-label">
      <lf-loader-component></lf-loader-component>
    </mat-label>
    <ng-template #showDefaultEmptyTemplate>
      <mat-label class="lf-dropdown-label">
        {{ emptyTemplateName | async }}
      </mat-label>
    </ng-template>
    <mat-select
      name="template-dropdown"
      id="template-dropdown"
      class="lf-dropdown"
      (selectionChange)="onTemplateChangedAsync($event)"
      (openedChange)="onToggleDropdownAsync($event)"
      [(value)]="templateSelected"
      [compareWith]="compareTemplateInfoFunc"
    >
      <mat-option selected *ngIf="isDropdownDefault">{{ emptyTemplateName | async }}</mat-option>
      <mat-option selected *ngIf="isDropdownError" class="dropdown-error-message">{{ AN_ERROR_OCCURED | async }}</mat-option>
      <mat-option hidden="!isDropdownDefault" *ngFor="let template of availableTemplates" [value]="template"
        >{{ template.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <ng-container *ngIf="isTemplateLoading; else checkIfHasError">
    <lf-loader-component></lf-loader-component>
  </ng-container>
  <ng-template #checkIfHasError>
    <ng-container *ngIf="isTemplateError; else displayFieldView">
      <div class="error-message">{{ templateErrorMessage | async }}</div>
    </ng-container>
    <ng-template #displayFieldView>
      <ng-template lfFieldView></ng-template>
    </ng-template>
  </ng-template>
</div>
